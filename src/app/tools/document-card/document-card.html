<div class="bg-gray-700 rounded-2xl shadow-md p-4 my-3 text-gray-200">
  <!-- Skeleton Loader -->
  <ng-container *ngIf="loading; else content">
    <ngx-skeleton-loader
      count="1"
      appearance="line"
      [theme]="{ height: '25px', width: '70%', 'margin-bottom': '10px' }"
      class="bg-gray-700 rounded"
    ></ngx-skeleton-loader>
    <ngx-skeleton-loader
      count="1"
      appearance="line"
      [theme]="{ height: '15px', width: '50%' }"
      class="bg-gray-700 rounded"
    ></ngx-skeleton-loader>
    <hr class="border-gray-600 my-2" />
    <ngx-skeleton-loader
      *ngFor="let i of [1,2,3]"
      appearance="line"
      [theme]="{ height: '20px', 'margin-bottom': '8px' }"
      class="bg-gray-700 rounded"
    ></ngx-skeleton-loader>
    <div class="flex gap-2 mt-3">
      <ngx-skeleton-loader
        count="3"
        appearance="circle"
        [theme]="{ width: '32px', height: '32px' }"
        class="bg-gray-700"
      ></ngx-skeleton-loader>
    </div>
  </ng-container>

  <!-- Real Content -->
  <ng-template #content>
    <!-- Header -->
    <div
      class="flex justify-between items-center cursor-pointer"
      (click)="toggleExpand()"
    >
      <div>
        <h5 class="font-semibold text-lg mb-1">
          {{ document.templateName }} (ID: {{ document.documentId }})
        </h5>
        <small class="text-gray-400">
          Status: {{ document.status }} | Uploaded: {{ document.uploadDate }}
        </small>
      </div>
      <div>
        <i
          [ngClass]="isExpanded ? 'bi bi-chevron-up' : 'bi bi-chevron-down'"
        ></i>
      </div>
    </div>

    <!-- Body -->
    <div *ngIf="isExpanded" class="mt-3">
      <hr class="border-gray-600 my-2" />
      <div *ngFor="let field of document.fields" class="mb-2">
        <strong>{{ field.fieldName }}</strong>: {{ field.value }}
        <div class="text-gray-400 text-sm">
          Confidence: {{ field.confidenceScore }}
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex gap-2 mt-3">
        <button
          class="bg-green-600 hover:bg-green-700 p-2 rounded-lg text-white flex items-center justify-center"
          (click)="onApprove.emit()"
        >
          <i class="bi bi-check-circle"></i>
        </button>
        <button
          class="bg-indigo-600 hover:bg-indigo-700 p-2 rounded-lg text-white flex items-center justify-center"
          (click)="onEdit.emit()"
        >
          <i class="bi bi-pencil"></i>
        </button>
        <button
          class="bg-red-600 hover:bg-red-700 p-2 rounded-lg text-white flex items-center justify-center"
          (click)="onDelete.emit()"
        >
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </div>
  </ng-template>
</div>
