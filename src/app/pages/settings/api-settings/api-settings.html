<h3 class="fw-bold mb-4">API Settings</h3>
<form #apiSettingsForm="ngForm" (ngSubmit)="saveSettings()">
  <div class="mb-3">
    <label class="form-label">AI Model</label>
    <select class="form-select" [(ngModel)]="settings.aiModel" name="aiModel" required>
      <option value="" disabled selected>Select Model</option>
      <option value="ChatGPT 4o">ChatGPT 4o</option>
      <option value="GitHub Copilot">GitHub Copilot</option>
      <option value="Claude 3">Claude 3</option>
      <option value="Gemini 1.5">Gemini 1.5</option>
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">API Key</label>
    <div class="input-group">
  <input
    [type]="showApiKey ? 'text' : 'password'"
    class="form-control"
    [(ngModel)]="settings.apiKey"
    name="apiKey"
    placeholder="Enter your API key"
    required
  />
  <button type="button" class="btn btn-outline-secondary" (click)="showApiKey = !showApiKey">
    {{ showApiKey ? 'Hide' : 'Show' }}
  </button>
</div>

    <div class="form-text">Keep your API key secure</div>
  </div>

  <div class="mb-3">
    <label class="form-label">Expiry Date</label>
    <input type="date" class="form-control" [(ngModel)]="settings.expiryDate" name="expiryDate"
           [min]="minDate | date:'yyyy-MM-dd'">
    <div class="form-text">Leave empty for no expiration</div>
  </div>

  <div class="d-flex gap-2 mt-4">
    <button class="btn btn-outline-danger" type="button" (click)="resetForm()">Cancel</button>
    <button class="btn btn-primary" type="submit" [disabled]="!apiSettingsForm.valid">
      <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
      Save Settings
    </button>
  </div>
</form>